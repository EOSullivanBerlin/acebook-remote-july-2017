<ul class='posts-index-posts'>
    <% @posts.each do |post| %>
      <li class='posts-index-post'>
        <section class='posts-index-post-horizontal'>
          <p class='posts-index-post-user-icon'>
            <%= image_tag("user_icon.png", :alt => "user icon") %>
          </p>
          <p class="posts-index-post-user-name">
            <%= post.user.first_name + " " + post.user.last_name %>
          </p>
        </section>
        <p class='posts-index-post-message'>
          <%= post.message %>
        </p>

        <p class="posts-index-post-timestamp">
          <%= post.created_at.localtime.strftime('%d-%b-%Y %I:%M:%S %p') %>
        </p>
        <p>
          <span class='posts-index-post-likes' id="like-<%= post.id %>">
            <%= pluralize(post.likes.count, "like") %> |
          </span>
          <% already_liked = post.likes.any?{ |like| like.user_id == current_user.id } %>
          <%= link_to_unless already_liked, 'Like', post_likes_path(post), remote: true, method: :post, class: "like-link", data: { id: post.id } %> |
          <%= link_to 'Comment', post_path(post) %>
        </p>
      </li>
    <% end %>
</ul>

<%= link_to new_post_path do %>
  New post
<% end %>
